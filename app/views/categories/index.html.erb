<%=  link_to "Sign out", destroy_user_session_path, data: { turbo_method: :delete }, class: 'btn-bar' %>
<h1 class="text-3xl font-bold underline">Categories</h1>
<div class="flex flex-col gap-1">
  <% @categories.each do |category| %>
    <%= link_to user_category_path(user_id: category.user_id, id: category.id) do%>
      <div class="flex gap-5 m-5 p-8 border border-gray-200 shadow-sm rounded-xl">
        <%= image_tag category.icon, class: "h-32 w-32" %>
        <h2 class="flex-1 mt-4 text-xl font-bold text-gray-900"><%= category.name %></h2>
        <% sum = 0 %>
        <% category.operations.each do |operation|%>
          <% sum += operation.amount %>
        <% end %>
        <p class="flex-1 mt-4 text-xl font-bold text-gray-900">Total: $<%= sum %></p>
      </div>
    <% end %>
  <% end %>
</div>
<%= link_to 'Create New Category', new_user_category_path(user_id: @user.id)%>
